<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gold Tracker - Live Prices</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="screen active">
        <div class="loading-content">
            <div class="gold-icon">
                <div class="gold-coin">ðŸ’°</div>
            </div>
            <h1 class="loading-title">Gold Tracker</h1>
            <div class="loading-spinner"></div>
        </div>
    </div>

    <!-- Welcome Screen -->
    <div id="welcome-screen" class="screen">
        <div class="welcome-content">
            <h1 class="welcome-title">Welcome to Gold Tracker</h1>
            <p class="welcome-subtitle">Track your gold investments with live price updates</p>
            
            <form id="welcome-form" class="welcome-form">
                <!-- Username Input -->
                <div class="form-group">
                    <label for="username" class="form-label">Your Name</label>
                    <input type="text" id="username" class="form-control" placeholder="Enter your name" required>
                </div>

                <!-- Gold Holdings Section -->
                <div class="holdings-section">
                    <h3 class="section-title">Your Gold Holdings</h3>
                    <div id="holdings-container">
                        <!-- Initial holding entry -->
                        <div class="holding-entry" data-index="1">
                            <div class="holding-header">
                                <h4>Purchase #1</h4>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Grams</label>
                                    <input type="number" class="form-control grams-input" placeholder="10" step="0.1" min="0.1" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Purity</label>
                                    <select class="form-control purity-input" required>
                                        <option value="">Select</option>
                                        <option value="24K">24K</option>
                                        <option value="22K">22K</option>
                                        <option value="18K">18K</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Purchase Date</label>
                                <input type="date" class="form-control date-input" min="2000-01-01" max="2025-10-07" value="2024-01-01" required>
                            </div>
                        </div>
                    </div>
                    
                    <button type="button" id="add-holding-btn" class="btn btn--secondary btn--full-width">
                        + Add Another Purchase
                    </button>
                </div>

                <button type="submit" id="see-investment-btn" class="btn btn--primary btn--full-width btn--lg" disabled>
                    See My Investment
                </button>
            </form>
        </div>
    </div>

    <!-- Dashboard Screen -->
    <div id="dashboard-screen" class="screen">
        <div class="dashboard-content">
            <!-- Header -->
            <div class="dashboard-header">
                <h1 id="user-greeting" class="dashboard-title">Hi!</h1>
            </div>

            <!-- Section 1: Investment Summary & Holdings -->
            <div class="section-1">
                <!-- Investment Summary -->
                <div class="investment-summary">
                    <h3>Investment Summary</h3>
                    <div class="summary-grid">
                        <div class="summary-card">
                            <div class="summary-label">Total Investment</div>
                            <div id="total-investment" class="summary-value">â‚¹0</div>
                        </div>
                        <div class="summary-card">
                            <div class="summary-label">Current Value</div>
                            <div id="current-value" class="summary-value">â‚¹0</div>
                        </div>
                        <div class="summary-card">
                            <div class="summary-label">Total Gain/Loss</div>
                            <div id="total-gain-loss" class="summary-value gain">â‚¹0 (0%)</div>
                        </div>
                    </div>
                </div>

                <!-- Holdings Breakdown -->
                <div class="holdings-breakdown">
                    <div class="section-header">
                        <h3>Your Holdings</h3>
                        <button id="add-new-purchase-btn" class="btn btn--primary btn--sm">
                            + Add New
                        </button>
                    </div>
                    <div id="holdings-list" class="holdings-list">
                        <!-- Holdings will be populated dynamically -->
                    </div>
                </div>
            </div>

            <!-- Section 2: Live Gold Prices & Chart -->
            <div class="section-2">
                <!-- Live Price Ticker -->
                <div class="live-ticker">
                    <div class="ticker-header">
                        <h3>Live Gold Prices (â‚¹/gram)</h3>
                        <div class="ticker-controls">
                            <div class="status-indicator">
                                <span id="connection-status" class="status--info">
                                    <span class="status-dot"></span>
                                    Connecting...
                                </span>
                            </div>
                            <button id="manual-refresh" class="btn btn--outline btn--sm">
                                <span class="refresh-icon">ðŸ”„</span>
                                Refresh
                            </button>
                        </div>
                    </div>
                    
                    <div class="price-grid">
                        <div class="price-card live-price" data-purity="24K">
                            <span class="price-label">24K Gold</span>
                            <div class="price-main">
                                <span class="price-value" id="price-24k">â‚¹12,213</span>
                                <span class="price-change" id="change-24k">
                                    <span class="change-arrow">â–²</span>
                                    <span class="change-percent">0%</span>
                                </span>
                            </div>
                        </div>
                        <div class="price-card live-price" data-purity="22K">
                            <span class="price-label">22K Gold</span>
                            <div class="price-main">
                                <span class="price-value" id="price-22k">â‚¹11,195</span>
                                <span class="price-change" id="change-22k">
                                    <span class="change-arrow">â–²</span>
                                    <span class="change-percent">0%</span>
                                </span>
                            </div>
                        </div>
                        <div class="price-card live-price" data-purity="18K">
                            <span class="price-label">18K Gold</span>
                            <div class="price-main">
                                <span class="price-value" id="price-18k">â‚¹9,160</span>
                                <span class="price-change" id="change-18k">
                                    <span class="change-arrow">â–²</span>
                                    <span class="change-percent">0%</span>
                                </span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="ticker-footer">
                        <div class="last-updated">
                            Last updated: <span id="last-updated-time">Just now</span>
                        </div>
                        <div class="next-update">
                            Next update in: <span id="countdown">30s</span>
                        </div>
                        <div class="api-source">
                            Source: <span id="api-source-name">Live API</span>
                        </div>
                    </div>
                </div>

                <!-- Price Chart -->
                <div class="chart-section">
                    <div class="chart-header">
                        <h3>Gold Price Trend</h3>
                        <div class="chart-controls">
                            <label for="carat-selector" class="form-label">Purity:</label>
                            <select id="carat-selector" class="form-control chart-selector">
                                <option value="24K">24K Gold</option>
                                <option value="22K">22K Gold</option>
                                <option value="18K">18K Gold</option>
                            </select>
                        </div>
                    </div>
                    <div class="chart-container" style="position: relative; height: 300px;">
                        <canvas id="price-chart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add New Purchase Modal -->
    <div id="add-purchase-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add New Purchase</h3>
                <button type="button" id="close-modal" class="close-btn">&times;</button>
            </div>
            <form id="new-purchase-form">
                <div class="modal-body">
                    <div class="form-group">
                        <label class="form-label">Grams</label>
                        <input type="number" id="new-grams" class="form-control" placeholder="10" step="0.1" min="0.1" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Purity</label>
                        <select id="new-purity" class="form-control" required>
                            <option value="">Select</option>
                            <option value="24K">24K</option>
                            <option value="22K">22K</option>
                            <option value="18K">18K</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Purchase Date</label>
                        <input type="date" id="new-date" class="form-control" min="2000-01-01" max="2025-10-07" value="2024-01-01" required>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" id="cancel-purchase" class="btn btn--secondary">Cancel</button>
                    <button type="submit" class="btn btn--primary">Add Purchase</button>
                </div>
            </form>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>